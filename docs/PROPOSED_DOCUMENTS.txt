Proposed Documentation Set (next up)

1) Project Reference
- docs/file-reference.md — One-line purpose for every file; grouped by subsystem.
- docs/architecture.md — High-level diagram of flows (auth, offline/sync, Firestore, Storage); data lifecycle.

2) Subsystem Guides
- docs/subsystems/routing-and-navigation.md — expo-router map, guards, route protection logic.
- docs/subsystems/auth-and-rbac.md — AuthContext, roles, adminCreateUser (secondary app), RouteProtection, RoleGuard.
- docs/subsystems/firestore-and-storage.md — Data models, CRUD APIs, image storage paths, cascading deletes, rules summary.
- docs/subsystems/offline-and-sync.md — SQLite schema, offlineStorage, syncService algorithm (batches, retries, triggers), network quality gating.
- docs/subsystems/reporting-and-export.md — PDF generator (single/batch), CSV export/import filters and mapping, usage points.
- docs/subsystems/theming-and-responsive-ui.md — theme palette, responsive utilities, core UI components contracts (Button/Card/Input/etc).
- docs/subsystems/storage-metrics.md — StorageCalculationService: methods, accuracy notes, admin settings integration.

3) Operations & Playbooks
- docs/playbooks/firebase-setup.md — Adapted from FIREBASE_SETUP_GUIDE.md with screen references and caveats.
- docs/playbooks/admin-operations.md — Creating users, role changes, deactivate/reactivate, delete user flow and cleanup.
- docs/playbooks/offline-troubleshooting.md — Common sync issues, logs, retries, cleanup, FAQs.
- docs/playbooks/backup-and-export.md — CSV exports scope, date filters, restore/import expectations.

4) Testing & QA
- docs/testing/manual-checklist.md — Smoke tests for staff/admin flows, PDFs, CSV, offline.
- docs/testing/automated-overview.md — Existing tests/scripts, where to add unit/integration tests next.

5) Security & Compliance
- docs/security/firestore-rules.md — Curated, least-privilege Firestore rules with explanations and diffs from current snapshot.
- docs/security/storage-rules.md — Storage rules, image access model, admin delete/read, active user checks.

6) Runbooks
- docs/runbooks/release-prep.md — Pre-release checks (rules, envs, docs), versioning, basic rollout steps.
- docs/runbooks/incidents.md — Handling outages (Firebase quotas, sync backlog), mitigation steps.

Priorities (P0 first)
- P0: file-reference.md, subsystems/offline-and-sync.md, subsystems/auth-and-rbac.md, subsystems/firestore-and-storage.md
- P1: subsystems/routing-and-navigation.md, subsystems/reporting-and-export.md, subsystems/storage-metrics.md
- P2: theming-and-responsive-ui.md, playbooks/*, testing/*, security/*, runbooks/*

Acceptance Criteria (for P0 docs)
- file-reference.md
  - Every file listed with 1–2 line purpose; grouped by: app routes/screens, lib (auth/offline/firestore/pdf), components/ui, hooks/constants, config, scripts/tests/types, docs.
  - Cross-links to key modules (AuthContext, FirestoreService, OfflineContext, syncService).
- subsystems/offline-and-sync.md
  - Diagram or step list of create→offline save→sync→cleanup.
  - DB schema summary (pending_assessments, sync_queue, offline_photos, metadata) + key APIs.
  - Triggers (connectivity/foreground/manual), batch size, retries/backoff, network quality gating, failure handling.
- subsystems/auth-and-rbac.md
  - Auth flow, user profile loading, role resolution, secondary admin app usage and rationale.
  - RouteProtection + RoleGuard behavior (segment redirects) and admin/staff access matrix.
- subsystems/firestore-and-storage.md
  - Data models (users, assessments), ID strategy, cascade deletes, image paths.
  - Key service methods and error cases; rules summary with “tighten for prod” notes.

Notes
- Keep docs concise and task-focused; link to source files and top-level guides already in repo.
- Prefer diagrams (simple ASCII or linked images) for flow summaries where helpful.